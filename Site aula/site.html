<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Meu Quarto Virtual</title>
  <!-- CSS externo, desativado por padr√£o -->
  <link rel="stylesheet" href="style.css" id="main-css" disabled>
</head>
<body>
  <noscript>
    <div style="background: #ff6b6b; color: white; padding: 10px; text-align: center;">
      ‚ö†Ô∏è JavaScript est√° desabilitado - os bot√µes n√£o funcionar√£o! ‚ö†Ô∏è
    </div>
  </noscript>

  <div id="css-warning" class="no-css-warning">
    ‚ö†Ô∏è CSS DESABILITADO - Voc√™ est√° vendo apenas HTML puro! ‚ö†Ô∏è
  </div>

  <h1>Este √© o meu quarto virtual</h1>
  <ul>
    <li class="cama" data-original="cama (li)">cama (li)</li>
    <li class="guarda-roupa" data-original="guarda-roupa (li)">guarda-roupa (li)</li>
    <li class="armario" data-original="armario (li)">armario (li)</li>
  </ul>

  <div class="controls">
    <button id="toggleCssBtn" title="Ativar ou desativar o CSS">üé® Ativar CSS</button>
    <button id="converteBtn">üõí Simular compra</button>
    <button id="resetBtn" style="display: none;">‚Ü©Ô∏è Voltar ao original</button>
  </div>

  <div class="explanation">
    <h2>üí° Explica√ß√£o Educativa:</h2>
    <p><strong>HTML:</strong> Estrutura do conte√∫do.</p>
    <p><strong>CSS:</strong> Apar√™ncia visual (est√° desativado inicialmente).</p>
    <p><strong>JavaScript:</strong> Intera√ß√µes e anima√ß√µes.</p>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      let cssEnabled = false;
      let isConverted = false;

      const emojiMap = {
        'cama': 'üõèÔ∏è',
        'guarda-roupa': 'üö™',
        'armario': 'üóÑÔ∏è'
      };

      const styleTag = document.getElementById('main-css');
      const toggleCssBtn = document.getElementById('toggleCssBtn');
      const convertBtn = document.getElementById('converteBtn');
      const resetBtn = document.getElementById('resetBtn');

      function showCssWarning() {
        if (!document.getElementById('css-warning')) {
          const warningDiv = document.createElement('div');
          warningDiv.id = 'css-warning';
          warningDiv.className = 'no-css-warning';
          warningDiv.textContent = '‚ö†Ô∏è CSS DESABILITADO - Voc√™ est√° vendo apenas HTML puro! ‚ö†Ô∏è';
          document.body.insertBefore(warningDiv, document.body.firstChild);
        }
      }

      function removeCssWarning() {
        const warning = document.getElementById('css-warning');
        if (warning) warning.remove();
      }

      function toggleCSS() {
        cssEnabled = !cssEnabled;

        if (cssEnabled) {
          styleTag.disabled = false;
          removeCssWarning();

          document.body.classList.remove('css-activation');
          void document.body.offsetWidth; // for√ßa reflow
          document.body.classList.add('css-activation');

          toggleCssBtn.textContent = 'üé® Desativar CSS';
          toggleCssBtn.title = 'Desativar estilo visual (CSS)';
        } else {
          styleTag.disabled = true;
          showCssWarning();

          toggleCssBtn.textContent = 'üé® Ativar CSS';
          toggleCssBtn.title = 'Ativar estilo visual (CSS)';
        }
      }

      function convertToEmojis() {
        if (isConverted) return;

        const items = document.querySelectorAll('li');
        convertBtn.disabled = true;

        items.forEach((li, index) => {
          setTimeout(() => {
            li.classList.add('buying-animation');
            setTimeout(() => {
              const className = li.className.split(' ')[0];
              const emoji = emojiMap[className];
              if (emoji) {
                li.textContent = emoji;
                li.classList.remove('buying-animation');
                li.classList.add('converted');
              }
            }, 600);
          }, index * 200);
        });

        setTimeout(() => {
          convertBtn.style.display = 'none';
          resetBtn.style.display = 'inline-block';
          isConverted = true;
        }, items.length * 200 + 600);
      }

      function resetToOriginal() {
        const items = document.querySelectorAll('li');
        items.forEach(li => {
          const original = li.getAttribute('data-original');
          if (original) {
            li.textContent = original;
            li.classList.remove('converted', 'buying-animation');
          }
        });

        convertBtn.style.display = 'inline-block';
        convertBtn.disabled = false;
        resetBtn.style.display = 'none';
        isConverted = false;
      }

      toggleCssBtn.addEventListener('click', toggleCSS);
      convertBtn.addEventListener('click', convertToEmojis);
      resetBtn.addEventListener('click', resetToOriginal);
    });
  </script>
</body>
</html>
